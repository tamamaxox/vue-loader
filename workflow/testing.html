<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Testing | Introduction</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.2">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    <link rel="next" href="../workflow/testing-with-mocks.html" />
    
    
    <link rel="prev" href="../workflow/linting.html" />
    

        
    </head>
    <body>
        
        
    <div class="book"
        data-level="4.3"
        data-chapter-title="Testing"
        data-filepath="workflow/testing.md"
        data-basepath=".."
        data-revision="Mon Feb 29 2016 15:27:34 GMT-0500 (EST)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" >
            
            <span><b>1.</b> Getting Started</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="start/spec.html">
            
                
                    <a href="../start/spec.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        Vue Component Spec
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="start/tutorial.html">
            
                
                    <a href="../start/tutorial.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        Basic Tutorial
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" >
            
            <span><b>2.</b> Features</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="features/es2015.html">
            
                
                    <a href="../features/es2015.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        ES2015 and Babel
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="features/scoped-css.html">
            
                
                    <a href="../features/scoped-css.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        Scoped CSS
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="features/postcss.html">
            
                
                    <a href="../features/postcss.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                        PostCSS and Autoprefixer
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="features/hot-reload.html">
            
                
                    <a href="../features/hot-reload.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.</b>
                        
                        Hot Reload
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" >
            
            <span><b>3.</b> Configurations</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="configurations/pre-processors.html">
            
                
                    <a href="../configurations/pre-processors.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        Pre-Processors
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="configurations/asset-url.html">
            
                
                    <a href="../configurations/asset-url.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        Asset URL Handling
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="configurations/advanced.html">
            
                
                    <a href="../configurations/advanced.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.</b>
                        
                        Advanced Loader Configuration
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="configurations/extract-css.html">
            
                
                    <a href="../configurations/extract-css.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.</b>
                        
                        Extracting CSS File
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" >
            
            <span><b>4.</b> Workflow</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="workflow/production.html">
            
                
                    <a href="../workflow/production.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        Production Build
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="workflow/linting.html">
            
                
                    <a href="../workflow/linting.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                        Linting
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="4.3" data-path="workflow/testing.html">
            
                
                    <a href="../workflow/testing.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.3.</b>
                        
                        Testing
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="workflow/testing-with-mocks.html">
            
                
                    <a href="../workflow/testing-with-mocks.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.4.</b>
                        
                        Testing with Mocks
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" data-path="options.html">
            
                
                    <a href="../options.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        Options Reference
                    </a>
            
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >Introduction</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="testing">Testing</h1>
<p>When testing <code>*.vue</code> files, we cannot use a plain CommonJS-based test runner because it won&apos;t know how to handle <code>*.vue</code> files. Instead, we still use Webpack + vue-loader to bundle our test files. The recommended setup is using <a href="http://karma-runner.github.io/0.13/index.html" target="_blank">Karma</a> and <a href="https://github.com/webpack/karma-webpack" target="_blank">karma-webpack</a>.</p>
<p>Karma is a test runner that launches browsers and runs your tests for you. You can choose what browsers you want to test in and what test framework (e.g. Mocha or Jasmine) you want to use. Here is an example Karma configuration that runs the tests inside <a href="http://phantomjs.org/" target="_blank">PhantomJS</a> with the <a href="http://jasmine.github.io/edge/introduction.html" target="_blank">Jasmine</a> test framework:</p>
<pre><code class="lang-bash">npm install\
  karma karma-webpack\
  karma-jasmine jasmine-core\
  karma-phantomjs-launcher phantomjs\
  --save-dev
</code></pre>
<pre><code class="lang-js"><span class="hljs-comment">// we can just use the exact same webpack config by requiring it</span>
<span class="hljs-comment">// however, remember to delete the original entry since we don&apos;t</span>
<span class="hljs-comment">// need it during tests</span>
<span class="hljs-keyword">var</span> webpackConfig = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;./webpack.config.js&apos;</span>)
<span class="hljs-keyword">delete</span> webpackConfig.entry

<span class="hljs-comment">// karma.conf.js</span>
<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">config</span>) </span>{
  config.set({
    browsers: [<span class="hljs-string">&apos;PhantomJS&apos;</span>],
    frameworks: [<span class="hljs-string">&apos;jasmine&apos;</span>],
    <span class="hljs-comment">// this is the entry file for all our tests.</span>
    files: [<span class="hljs-string">&apos;test/index.js&apos;</span>],
    <span class="hljs-comment">// we will pass the entry file to webpack for bundling.</span>
    preprocessors: {
      <span class="hljs-string">&apos;test/index.js&apos;</span>: [<span class="hljs-string">&apos;webpack&apos;</span>]
    },
    <span class="hljs-comment">// use the webpack config</span>
    webpack: webpackConfig,
    <span class="hljs-comment">// avoid walls of useless text</span>
    webpackMiddleware: {
      noInfo: <span class="hljs-literal">true</span>
    },
    singleRun: <span class="hljs-literal">true</span>
  })
}
</code></pre>
<p>And for the entry <code>test/index.js</code> file:</p>
<pre><code class="lang-js"><span class="hljs-comment">// test/index.js</span>
<span class="hljs-comment">// require all test files using special Webpack feature</span>
<span class="hljs-comment">// https://webpack.github.io/docs/context.html#require-context</span>
<span class="hljs-keyword">var</span> testsContext = <span class="hljs-built_in">require</span>.context(<span class="hljs-string">&apos;.&apos;</span>, <span class="hljs-literal">true</span>, <span class="hljs-regexp">/\.spec$/</span>)
testsContext.keys().forEach(testsContext)
</code></pre>
<p>This entry file simply requires all other files that ends in <code>.spec.js</code> in the same folder. Now we can actually write some tests:</p>
<pre><code class="lang-js"><span class="hljs-comment">// test/component-a.spec.js</span>
<span class="hljs-keyword">var</span> Vue = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;vue&apos;</span>)
<span class="hljs-keyword">var</span> ComponentA = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;../../src/components/a.vue&apos;</span>)

describe(<span class="hljs-string">&apos;a.vue&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

  <span class="hljs-comment">// asserting JavaScript options</span>
  it(<span class="hljs-string">&apos;should have correct message&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    expect(ComponentA.data().msg).toBe(<span class="hljs-string">&apos;Hello from Component A!&apos;</span>)
  })

  <span class="hljs-comment">// asserting rendered result by actually rendering the component</span>
  it(<span class="hljs-string">&apos;should render correct message&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> vm = <span class="hljs-keyword">new</span> Vue({
      template: <span class="hljs-string">&apos;&lt;div&gt;&lt;test&gt;&lt;/test&gt;&lt;/div&gt;&apos;</span>,
      components: {
        <span class="hljs-string">&apos;test&apos;</span>: ComponentA
      }
    }).$mount()
    expect(vm.$el.querySelector(<span class="hljs-string">&apos;h2.red&apos;</span>).textContent).toBe(<span class="hljs-string">&apos;Hello from Component A!&apos;</span>)
  })
})
</code></pre>
<p>To run the tests, add the following NPM script:</p>
<pre><code class="lang-js"><span class="hljs-comment">// package.json</span>
...
<span class="hljs-string">&quot;scripts&quot;</span>: {
  ...
  <span class="hljs-string">&quot;test&quot;</span>: <span class="hljs-string">&quot;karma start karma.conf.js&quot;</span>
}
...
</code></pre>
<p>Finally, run:</p>
<pre><code class="lang-bash">npm <span class="hljs-built_in">test</span>
</code></pre>
<p>Again, <a href="https://github.com/vuejs/vue-loader-example" target="_blank">vue-loader-example</a> contains a fully working example with tests.</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../workflow/linting.html" class="navigation navigation-prev " aria-label="Previous page: Linting"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../workflow/testing-with-mocks.html" class="navigation navigation-next " aria-label="Next page: Testing with Mocks"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="../gitbook/plugins/gitbook-plugin-edit-link/plugin.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-github/plugin.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"edit-link":{"base":"https://github.com/vuejs/vue-loader/tree/master/docs","label":"Edit This Page"},"github":{"url":"https://github.com/vuejs/vue-loader/"},"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":false,"twitter":false,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
